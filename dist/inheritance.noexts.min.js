/*!
 * inheritance.js (1.0.0-beta.0)
 *
 * Copyright (c) 2016 Brandon Sara (http://bsara.github.io)
 * Licensed under the CPOL-1.02 (https://github.com/bsara/inheritance.js/blob/master/LICENSE.md)
 */
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():(e.I=t(),e.ObjectDefinition=e.I.ObjectDefinition,delete e.I.ObjectDefinition)}(this,function(){function mix(e,t){var r=e||{};t instanceof Array||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];if(o)for(var i in o)o.hasOwnProperty(i)&&(r[i]=o[i])}return r}function mixDeep(e,t){var r=e||{};t instanceof Array||(t=[t]);for(var n=0;n<t.length;n++){var o=t[n];if(o)for(var i in o)o.hasOwnProperty(i)&&(null===o[i]||"object"!=typeof o[i]?r[i]=o[i]:mixDeep(r[i],o[i]))}return r}function mixPrototype(e,t){if(e=e||{prototype:{}},null==e.prototype)throw new TypeError("`obj.prototype` cannot be `undefined` or `null`!");return e.prototype=mix(e.prototype,t),e}function mixPrototypeDeep(e,t){if(e=e||{prototype:{}},null==e.prototype)throw new TypeError("`obj.prototype` cannot be `undefined` or `null`!");return e.prototype=mixDeep(e.prototype,t),e}function inheritance(parent,objDefProps){parent=parent||Object,objDefProps=objDefProps||{};var objDef,objCtor=objDefProps.ctor||function(){return objDef.__super__.constructor.apply(this,arguments)},objDefName=_getObjDefName(objCtor,objDefProps.__defName);return eval("objDef = function"+(objDefName?" "+objDefName:"")+"() { return objCtor.apply(this, arguments); };"),objDef.prototype=Object.create(parent.prototype),makeInheritable(objDef),_addMixins(objDefProps),_addConstants(objDef,objDefProps.consts),_addStaticProperties(objDef,objDefProps.statics),_addPrototypeProperties(objDef,objDefProps),_addSuperFunction(objDef),_addOwnerIfFunction(objDef.prototype,objCtor),Object.defineProperty(objDef,"isObjDef",{get:function(){return!0}}),Object.defineProperty(objDef,"__super__",{get:function(){return parent.prototype}}),Object.defineProperty(objDef.prototype,"__ctor__",{get:function(){return objCtor}}),objDef}function _getObjDefName(e,t){return"string"==typeof t&&t.trim()?t.trim():e.name?e.name:void 0}function _addMixins(e){var t=e.mixins;null!=t&&Array.isArray(t)&&mixDeep(e,t)}function _addConstants(e,t){if(null!=t)for(var r in t){if(_isReservedStaticProperty(r))throw new ReferenceError("");!function(t,r){Object.defineProperty(e,t,{get:function(){return r}})}(r,t[r])}}function _addStaticProperties(e,t){if(null!=t)for(var r in t){if(_isReservedStaticProperty(r))throw new ReferenceError("");_addProperty(e,t,r)}}function _addPrototypeProperties(e,t){e.prototype.constructor=_addOwnerIfFunction(e.prototype,e);for(var r in t){if("constructor"===r||"ctor"===r||"consts"===r||"statics"===r||"_super"===r||"__ctor__"===r||"__defName"===r)throw new ReferenceError("");_addProperty(e.prototype,t,r)}}function _addSuperFunction(e){Object.defineProperty(e.prototype,"_super",{configurable:!1,enumerable:!1,writable:!1,value:function(){var e=arguments.callee.caller;if(e){var t=e.owner,r=t.constructor.__super__;if(r){if(e===t.constructor||e===t.__ctor__)return r.constructor.apply(this,arguments);var n=e.name;if(!n)for(var o=Object.getOwnPropertyNames(t),i=0;i<o.length;i++){var f=o[i],a=Object.getOwnPropertyDescriptor(t,f);if(a.value===e||a.get===e||a.set===e){n=f;break}}if(n){var p,u=InternalUtils.getPropertyDescriptor(r,n),c=InternalUtils.getPropertyDescriptor(t,n);if(null!=u&&(p=null!=c.get&&c.get===e?u.get:null!=c.set&&c.set===e?u.set:u.value),"function"==typeof p&&null!=p)return p.apply(this,arguments)}}}}})}function _isReservedStaticProperty(e){return"isObjDef"===e||"__super__"===e||"__defName"===e}function _addProperty(e,t,r){var n={},o=Object.getOwnPropertyDescriptor(t,r);if("undefined"!=typeof o)for(var i in o)n[i]=o[i];"undefined"!=typeof n.value&&_addOwnerIfFunction(e,_deepClone(n.value)),"undefined"!=typeof n.get&&_addOwnerIfFunction(e,n.get),"undefined"!=typeof n.set&&_addOwnerIfFunction(e,n.set),Object.defineProperty(e,r,n)}function _addOwnerIfFunction(e,t){return"function"==typeof t&&(t.owner=e),t}function _deepClone(e){if(null==e)return e;var t=e;if(Array.isArray(e))t=new e.constructor,e.forEach(function(e){t.push(_deepClone(e))});else if("object"==typeof e){var r=e instanceof Date?e.valueOf():void 0;t=new e.constructor(r);for(var n in e)t[n]=_deepClone(e[n])}return t}function makeInheritable(e,t,r){if(null==e)throw new TypeError("`obj` cannot be undefined or null!");if(t!==!0&&null!=e.extend){if(r===!0)return e;throw new TypeError("`obj.extend` already exists! You're seeing this error to prevent the current extend function from being overwritten. See docs for how to override this functionality.")}return Object.defineProperty(e,"extend",{value:function(t){return inheritance(e,t)},configurable:!0,enumerable:!1,writable:!0}),e}function seal(e,t,r){if(null==e)throw new TypeError("`obj` cannot be undefined or null!");if(t!==!0&&null!=e.extend){if(r===!0)return e;throw new TypeError("`obj.extend` already exists! You're seeing this error to prevent the current extend function from being overwritten. See docs for how to override this functionality.")}return null!=e.extend&&delete e.extend,Object.defineProperties(e,{sealed:{get:function(){return!0}},extend:{configurable:!1,enumerable:!1,writable:!1,value:function(){throw new TypeError("The object definition you are trying to extend is sealed and cannot be inherited.")}}}),e}var InternalUtils={getPropertyDescriptor:function(e,t){var r=Object.getOwnPropertyDescriptor(e,t);if(null!=r)return r;if(null!=e.constructor&&null!=e.constructor.__super__)return InternalUtils.getPropertyDescriptor(e.constructor.__super__,t)}},ObjectDefinition={create:function(){var e=arguments[0],t=arguments[1];return"string"==typeof e?t.__defName=e:t=e,inheritance(Object,t)},createSealed:function(){return seal(ObjectDefinition.create.apply(this,arguments),!0)}};return seal(ObjectDefinition,!0),{mix:mix,mixDeep:mixDeep,mixPrototype:mixPrototype,mixPrototypeDeep:mixPrototypeDeep,inheritance:inheritance,makeInheritable:makeInheritable,seal:seal,ObjectDefinition:ObjectDefinition}});